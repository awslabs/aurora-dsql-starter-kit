
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Documentation for Amazon Aurora DSQL, a serverless distributed SQL database">
      
      
      
        <link rel="canonical" href="https://awslabs.github.io/aurora-dsql-starter-kit/samples/cpp/libpq/index.html">
      
      
      
      
        
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>Aurora DSQL with libpq - Aurora DSQL Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        
        <link rel="stylesheet" href="../../../assets/external/fonts.googleapis.com/css.49ea35f2.css">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#aurora-dsql-with-libpq" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="Aurora DSQL Documentation" class="md-header__button md-logo" aria-label="Aurora DSQL Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Aurora DSQL Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Aurora DSQL with libpq
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="custom" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/aws/aurora-dsql-starter-kit" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../index.html" class="md-tabs__link">
          
  
  
  User Guide

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../api-reference.html" class="md-tabs__link">
          
  
  
  API Reference

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../troubleshooting.html" class="md-tabs__link">
          
  
  
  Troubleshooting

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Aurora DSQL Documentation" class="md-nav__button md-logo" aria-label="Aurora DSQL Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Aurora DSQL Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/aws/aurora-dsql-starter-kit" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" >
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    User Guide
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    User Guide
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Welcome
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../what-is-amazon-aurora-dsql.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    What is Amazon Aurora DSQL?
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../guides/getting-started/quickstart.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Getting Started
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_4" >
        
          
          <label class="md-nav__link" for="__nav_1_4" id="__nav_1_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Managing Aurora DSQL Clusters
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Managing Aurora DSQL Clusters
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../managing-clusters.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Managing Clusters Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../single-region-clusters.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Single-Region Clusters
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../multi-region-clusters.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Multi-Region Clusters
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_5" >
        
          
          <label class="md-nav__link" for="__nav_1_5" id="__nav_1_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Programming with DSQL
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Programming with DSQL
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../programming-with-dsql.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Programming with DSQL Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../connectors-overview.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Connectors Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_6" >
        
          
          <label class="md-nav__link" for="__nav_1_6" id="__nav_1_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Auth & Access
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Auth & Access
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../authentication-and-authorization.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Auth & Access Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../generate-authentication-token.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Generate Authentication Token
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../database-roles-iam-authentication.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Database Roles and IAM Authentication
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_7" >
        
          
          <label class="md-nav__link" for="__nav_1_7" id="__nav_1_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Query Editors
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    Query Editors
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../generative-ai/query-editor.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Aurora DSQL Query Editor
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../generative-ai/jupyterlab.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Using JupyterLab with Aurora DSQL
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_8" >
        
          
          <label class="md-nav__link" for="__nav_1_8" id="__nav_1_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Generative AI
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    Generative AI
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../generative-ai/mcp-server.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    AWS Labs Aurora DSQL MCP Server
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../backup-and-restore.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Backup and Restore
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_10" >
        
          
          <label class="md-nav__link" for="__nav_1_10" id="__nav_1_10_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Considerations
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_10">
            <span class="md-nav__icon md-icon"></span>
            
  
    Considerations
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../considerations.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Considerations Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_11" >
        
          
          <label class="md-nav__link" for="__nav_1_11" id="__nav_1_11_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Quotas and Limits
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_11">
            <span class="md-nav__icon md-icon"></span>
            
  
    Quotas and Limits
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../quotas-and-limits.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Quotas and Limits Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    API Reference
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    API Reference
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api-reference.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    API Reference Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Troubleshooting
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Troubleshooting
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../troubleshooting.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Troubleshooting Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  

<nav class="md-nav md-nav--secondary" aria-label="On this page">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      On this page
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      
        Overview
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#about-the-code-example" class="md-nav__link">
    <span class="md-ellipsis">
      
        About the code example
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#important" class="md-nav__link">
    <span class="md-ellipsis">
      
        ⚠️ Important
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tls-connection-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      
        TLS connection configuration
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#run-the-example" class="md-nav__link">
    <span class="md-ellipsis">
      
        Run the example
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Run the example">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    <span class="md-ellipsis">
      
        Prerequisites
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#download-the-amazon-root-certificate-from-the-official-trust-store" class="md-nav__link">
    <span class="md-ellipsis">
      
        Download the Amazon root certificate from the official trust store
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Download the Amazon root certificate from the official trust store">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#c-compiler" class="md-nav__link">
    <span class="md-ellipsis">
      
        C++ compiler
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aws-sdk-for-c" class="md-nav__link">
    <span class="md-ellipsis">
      
        AWS SDK for C++
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#libpq-library-and-postgres-include-files" class="md-nav__link">
    <span class="md-ellipsis">
      
        Libpq library and Postgres include files
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ssl-libraries" class="md-nav__link">
    <span class="md-ellipsis">
      
        SSL Libraries
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#build-the-example-program" class="md-nav__link">
    <span class="md-ellipsis">
      
        Build the example program
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Build the example program">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#edit-the-makefile-file" class="md-nav__link">
    <span class="md-ellipsis">
      
        Edit the Makefile file
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Edit the Makefile file">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#location-of-the-awd-sdk-cpp" class="md-nav__link">
    <span class="md-ellipsis">
      
        Location of the awd-sdk-cpp
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#linux" class="md-nav__link">
    <span class="md-ellipsis">
      
        Linux
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mac" class="md-nav__link">
    <span class="md-ellipsis">
      
        Mac
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#build-the-program" class="md-nav__link">
    <span class="md-ellipsis">
      
        Build the program
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Build the program">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#linux_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Linux
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mac_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Mac
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#run-the-example-program" class="md-nav__link">
    <span class="md-ellipsis">
      
        Run the example program
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Run the example program">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#set-environment-variables-specifying-the-location-of-the-libpq-and-aws-sdk-libraries" class="md-nav__link">
    <span class="md-ellipsis">
      
        Set environment variables specifying the location of the libpq and aws sdk libraries
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Set environment variables specifying the location of the libpq and aws sdk libraries">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#linux_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        Linux
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mac_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        Mac
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#set-environment-variables-specifying-cluster-endpoint-and-region" class="md-nav__link">
    <span class="md-ellipsis">
      
        Set environment variables specifying cluster endpoint and region
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#run-the-example-program_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Run the example program
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#troubleshooting" class="md-nav__link">
    <span class="md-ellipsis">
      
        Troubleshooting
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Troubleshooting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ssl-support-in-libpq" class="md-nav__link">
    <span class="md-ellipsis">
      
        SSL support in libpq
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="aurora-dsql-with-libpq">Aurora DSQL with libpq<a class="headerlink" href="#aurora-dsql-with-libpq" title="Permanent link">&para;</a></h1>
<h2 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">&para;</a></h2>
<p>This code example demonstrates how to use the Libpq library to interact with Amazon Aurora DSQL (DSQL). The example shows you how
to connect to an Aurora DSQL cluster and perform basic database operations.</p>
<p>Aurora DSQL is a distributed SQL database service that provides high availability and scalability for
your PostgreSQL-compatible applications. Libpq is a popular PostgreSQL library that allows
you to interact with PostgreSQL databases using c/cpp code.</p>
<h2 id="about-the-code-example">About the code example<a class="headerlink" href="#about-the-code-example" title="Permanent link">&para;</a></h2>
<p>The example demonstrates a flexible connection approach that works for both admin and non-admin users:</p>
<ul>
<li>When connecting as an <strong>admin user</strong>, the example uses the <code>public</code> schema and generates an admin authentication
  token.</li>
<li>When connecting as a <strong>non-admin user</strong>, the example uses a custom <code>myschema</code> schema and generates a standard
  authentication token. The <code>myschema</code> schema needs to be created prior to running the example and the <strong>non-admin user</strong> needs to be granted access to the schema.</li>
</ul>
<p>The code automatically detects the user type and adjusts its behavior accordingly.
The example contains comments explaining the code and the operations being performed.</p>
<h2 id="important">⚠️ Important<a class="headerlink" href="#important" title="Permanent link">&para;</a></h2>
<ul>
<li>Running this code might result in charges to your AWS account.</li>
<li>We recommend that you grant your code least privilege. At most, grant only the
  minimum permissions required to perform the task. For more information, see
  <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/best-practices.html#grant-least-privilege">Grant least privilege</a>.</li>
<li>This code is not tested in every AWS Region. For more information, see
  <a href="https://aws.amazon.com/about-aws/global-infrastructure/regional-product-services">AWS Regional Services</a>.</li>
</ul>
<h2 id="tls-connection-configuration">TLS connection configuration<a class="headerlink" href="#tls-connection-configuration" title="Permanent link">&para;</a></h2>
<p>This example uses direct TLS connections where supported, and verifies the server certificate is trusted. Verified SSL
connections should be used where possible to ensure data security during transmission.</p>
<ul>
<li>Driver versions following the release of PostgreSQL 17 support direct TLS connections, bypassing the traditional
  PostgreSQL connection preamble</li>
<li>Direct TLS connections provide improved connection performance and enhanced security</li>
<li>Not all PostgreSQL drivers support direct TLS connections yet, or only in recent versions following PostgreSQL 17</li>
<li>Ensure your installed driver version supports direct TLS negotiation, or use a version that is at least as recent as
  the one used in this sample</li>
<li>If your driver doesn't support direct TLS connections, you may need to use the traditional preamble connection instead</li>
</ul>
<h2 id="run-the-example">Run the example<a class="headerlink" href="#run-the-example" title="Permanent link">&para;</a></h2>
<h3 id="prerequisites">Prerequisites<a class="headerlink" href="#prerequisites" title="Permanent link">&para;</a></h3>
<ul>
<li>You must have an AWS account, and have your default credentials and AWS Region
  configured as described in the
  <a href="https://docs.aws.amazon.com/credref/latest/refdocs/creds-config-files.html">Globally configuring AWS SDKs and tools</a>
  guide.</li>
<li>You must have an Aurora DSQL cluster. For information about creating an Aurora DSQL cluster, see the
  <a href="https://docs.aws.amazon.com/aurora-dsql/latest/userguide/getting-started.html">Getting started with Aurora DSQL</a>
  guide.</li>
<li>If connecting as a non-admin user, ensure the user is linked to an IAM role and is granted access to the <code>myschema</code>
  schema. See the
  <a href="https://docs.aws.amazon.com/aurora-dsql/latest/userguide/using-database-and-iam-roles.html">Using database roles with IAM roles</a>
  guide.</li>
</ul>
<h3 id="download-the-amazon-root-certificate-from-the-official-trust-store">Download the Amazon root certificate from the official trust store<a class="headerlink" href="#download-the-amazon-root-certificate-from-the-official-trust-store" title="Permanent link">&para;</a></h3>
<p>Download the Amazon root certificate from the official trust store:</p>
<div class="highlight"><pre><span></span><code>wget https://www.amazontrust.com/repository/AmazonRootCA1.pem -O root.pem
</code></pre></div>
<h4 id="c-compiler">C++ compiler<a class="headerlink" href="#c-compiler" title="Permanent link">&para;</a></h4>
<p>A c++ compiler that supports c++11 standard or newer.</p>
<h4 id="aws-sdk-for-c">AWS SDK for C++<a class="headerlink" href="#aws-sdk-for-c" title="Permanent link">&para;</a></h4>
<p>The AWS SDK for C++ installed</p>
<ul>
<li>The instructions how to get and install the sdk can be found in the <a href="https://docs.aws.amazon.com/sdk-for-cpp/v1/developer-guide/welcome.html">Official site</a></li>
<li>The path to the AWS SDK libraries and include files will need to be specified for compilation</li>
<li>The path to the AWS SDK libraries will need to be specified for execution</li>
</ul>
<p><strong>Note</strong>
If you're building the SDK from source and you only need it for dsql you may use the -DBUILD_ONLY="dsql" flag to avoid building the entire sdk.
For example:</p>
<div class="highlight"><pre><span></span><code>cmake &lt;your_path&gt;/aws-sdk-cpp -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=&lt;your_path_to_aws-sdk-install&gt; -DBUILD_ONLY=&quot;dsql&quot;

# Note: Follow build and installation instructions on the official website. 
# This example is meant to point to the -DBUILD_ONLY=&quot;dsql&quot; flag.
</code></pre></div>
<h4 id="libpq-library-and-postgres-include-files">Libpq library and Postgres include files<a class="headerlink" href="#libpq-library-and-postgres-include-files" title="Permanent link">&para;</a></h4>
<ul>
<li>The path to the Libpq library and include files will need to be specified for compilation</li>
<li>The path to the Libpq library will need to be specified for execution</li>
<li>Obtaining Libpq library<ul>
<li>It is installed with postgres installation. Therefore, if postgres is installed on the system the libpq is present in ../postgres_install_dir/lib, ../postgres_install_dir/include</li>
<li>It is installed when psql client program is installed, similarly as with postgres installation</li>
<li>On some systems libpq can be installed through package manager (if the package exists for the system) e.g.
    <div class="highlight"><pre><span></span><code>sudo yum install libpq-devel
</code></pre></div></li>
<li>On Mac libpq can be installed using brew
    <div class="highlight"><pre><span></span><code>brew install libpq
</code></pre></div></li>
<li>The <a href="https://www.postgresql.org/download/">official website</a> may have a package for libpq or psql which bundles libpq</li>
<li>The last resort, build from source which also can be obtained from <a href="https://www.postgresql.org/ftp/source/">official website</a> </li>
</ul>
</li>
</ul>
<h4 id="ssl-libraries">SSL Libraries<a class="headerlink" href="#ssl-libraries" title="Permanent link">&para;</a></h4>
<ul>
<li>SSL libraries need to be installed</li>
<li>For example on Amazon Linux run these commands:
    <div class="highlight"><pre><span></span><code>  sudo yum install -y openssl-devel 
  sudo yum install -y  openssl11-libs 
</code></pre></div></li>
<li>On some systems the SSL libraries can be installed using package managers<ul>
<li>They can be downloaded from the <a href="https://openssl-library.org/source/index.html">official website</a></li>
</ul>
</li>
</ul>
<h3 id="build-the-example-program">Build the example program<a class="headerlink" href="#build-the-example-program" title="Permanent link">&para;</a></h3>
<h4 id="edit-the-makefile-file">Edit the Makefile file<a class="headerlink" href="#edit-the-makefile-file" title="Permanent link">&para;</a></h4>
<p>The Makefile is located in the libpq/src directory.</p>
<h5 id="location-of-the-awd-sdk-cpp">Location of the awd-sdk-cpp<a class="headerlink" href="#location-of-the-awd-sdk-cpp" title="Permanent link">&para;</a></h5>
<p>Update the following variables with the paths to the aws-sdk-cpp include and library files on your computer:</p>
<div class="highlight"><pre><span></span><code>AWS_INC_DIR=-I &lt;your_path_to_aws-sdk-install&gt;/include
AWS_LIB_DIR=-L &lt;your_path_to_aws-sdk-install&gt;/lib
</code></pre></div>
<h5 id="linux">Linux<a class="headerlink" href="#linux" title="Permanent link">&para;</a></h5>
<p>Edit the variables specifying path to the postgres include files and path to the location of the libpq library.</p>
<p>Relace the /usr/local/pgsql/include and /usr/local/pgsql/lib with locations on your computer:</p>
<div class="highlight"><pre><span></span><code>PG_INC_DIR=-I /usr/local/pgsql/include
LIBPQ_DIR=-L /usr/local/pgsql/lib
</code></pre></div>
<p>Note:</p>
<p>If you have the pg_config utility installed you can use the following commands to retrieve the above directories:</p>
<div class="highlight"><pre><span></span><code>pg_config --includedir
pg_config --libdir
</code></pre></div>
<h5 id="mac">Mac<a class="headerlink" href="#mac" title="Permanent link">&para;</a></h5>
<p>The Mac related variables are in the 'Mac' section of the Makefile.
Edit the variables specifying path to the postgres include files and path to the location of the libpq library as well as the compiler include directory.</p>
<p><strong>Note:</strong> These are examples only. Replace them with your path.</p>
<div class="highlight"><pre><span></span><code>(x86)
PG_INC_DIR_MAC=-I /usr/local/opt/libpq/include
LIBPQ_DIR_MAC=-L /usr/local/opt/libpq/lib
OR
(brew)
PG_INC_DIR_MAC=-I /opt/homebrew/opt/postgresql@16/include
LIBPQ_DIR_MAC=-L /opt/homebrew/opt/postgresql@16/lib

COMPILER_INC_DIR_MAC=-I /Library/Developer/CommandLineTools/SDKs/MacOSX14.x.sdk/usr/include/c++/v1

# or could be 

COMPILER_INC_DIR_MAC=-I /Library/Developer/CommandLineTools/SDKs/MacOSX15.x.sdk/usr/include/c++/v1
</code></pre></div>
<h4 id="build-the-program">Build the program<a class="headerlink" href="#build-the-program" title="Permanent link">&para;</a></h4>
<p>From the libpq/src directory run make command:</p>
<h5 id="linux_1">Linux<a class="headerlink" href="#linux_1" title="Permanent link">&para;</a></h5>
<div class="highlight"><pre><span></span><code>make libpq_example
</code></pre></div>
<h4 id="mac_1">Mac<a class="headerlink" href="#mac_1" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code>make libpq_example_mac
</code></pre></div>
<p>This should result in the <strong>libpq_example</strong> executable program</p>
<h3 id="run-the-example-program">Run the example program<a class="headerlink" href="#run-the-example-program" title="Permanent link">&para;</a></h3>
<p><strong>Note</strong></p>
<blockquote>
<p>To execute the example code, you need to have valid AWS Credentials configured (e.g. AWS_ACCESS_KEY_ID, AWS_SECRET_ACCESS_KEY and AWS_SESSION_TOKEN)</p>
</blockquote>
<h4 id="set-environment-variables-specifying-the-location-of-the-libpq-and-aws-sdk-libraries">Set environment variables specifying the location of the libpq and aws sdk libraries<a class="headerlink" href="#set-environment-variables-specifying-the-location-of-the-libpq-and-aws-sdk-libraries" title="Permanent link">&para;</a></h4>
<p>Run the commands below.
Replace the paths in the commands below with the path on your computer.</p>
<h5 id="linux_2">Linux<a class="headerlink" href="#linux_2" title="Permanent link">&para;</a></h5>
<div class="highlight"><pre><span></span><code>export LD_LIBRARY_PATH=&quot;/usr/local/pgsql/lib:$LD_LIBRARY_PATH&quot;
export LD_LIBRARY_PATH=&quot;&lt;your_path_to_aws-sdk-install&gt;/lib:$LD_LIBRARY_PATH&quot;
</code></pre></div>
<h5 id="mac_2">Mac<a class="headerlink" href="#mac_2" title="Permanent link">&para;</a></h5>
<div class="highlight"><pre><span></span><code>export DYLD_FALLBACK_LIBRARY_PATH=&lt;your_path_to_aws-sdk-install&gt;/lib
</code></pre></div>
<h4 id="set-environment-variables-specifying-cluster-endpoint-and-region">Set environment variables specifying cluster endpoint and region<a class="headerlink" href="#set-environment-variables-specifying-cluster-endpoint-and-region" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code># e.g. &#39;admin&#39; or a custom user 
export CLUSTER_USER=&lt;your cluster user&gt; 

# e.g. &quot;foo0bar1baz2quux3quuux4.dsql.us-east-1.on.aws&quot;
export CLUSTER_ENDPOINT=&quot;&lt;your cluster endpoint&gt;&quot;

# e.g. &quot;us-east-1&quot;
export REGION=&quot;&lt;your cluster region&gt;&quot;
</code></pre></div>
<h4 id="run-the-example-program_1">Run the example program<a class="headerlink" href="#run-the-example-program_1" title="Permanent link">&para;</a></h4>
<p>From the libpq/src directory run:</p>
<div class="highlight"><pre><span></span><code>./libpq_example
</code></pre></div>
<h3 id="troubleshooting">Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permanent link">&para;</a></h3>
<h4 id="ssl-support-in-libpq">SSL support in libpq<a class="headerlink" href="#ssl-support-in-libpq" title="Permanent link">&para;</a></h4>
<p>Aurora DSQL requires SSL when connecting to it. Therefore, the libpq library must have been built with SSL support.</p>
<p>If this is not the case, you may see the following error message while executing the libpq_example program:</p>
<blockquote>
<p>Error while connecting to the database server: sslmode value "require" invalid when SSL support is not compiled in.</p>
</blockquote>
<p>Hopefully, the libpq library that is distributed with PostgreSQL installation as well as through package managers has the SSL built in. </p>
<p>It may not be the case if you've built it yourself from sources. In this case make sure to include the SSL when building.</p>
<hr />
<p>Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.</p>
<p>SPDX-License-Identifier: MIT-0</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../../..", "features": ["content.code.copy", "content.code.select", "navigation.tabs", "navigation.tabs.sticky", "navigation.sections", "navigation.top", "search.highlight", "content.code.copy"], "search": "../../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>